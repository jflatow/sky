(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){

},{}],2:[function(require,module,exports){
Sky=require("../sky"),Sun=require("../sun"),Geo=require("../ext/geo"),Orb=require("../ext/orb"),UFO=require("../nav/ufo"),iOS=require("../nav/ios");
},{"../ext/geo":3,"../ext/orb":4,"../nav/ios":5,"../nav/ufo":6,"../sky":7,"../sun":8}],3:[function(require,module,exports){
function MTS(t){this.spec=t,this.scheme="xyz"}var Sky=require("../sky"),Sun=require("../sun"),Orb=require("./orb"),fmt=Sun.format,up=Sun.up,mod=Sun.mod,log=Math.log,sqrt=Math.sqrt,asin=Math.asin,PI=Math.PI,haversin=function(t){return sqr(sin(t/2))},deg=function(t){return 180/PI*t},rad=function(t){return PI/180*t},cos=function(t){return Math.cos(rad(t))},sin=function(t){return Math.sin(rad(t))},tan=function(t){return Math.tan(rad(t))},sqr=function(t){return t*t};up(MTS.prototype,{href:function(t,r,n){return fmt(this.spec,{x:t,y:r,z:n})},tile:function(t,r,n){return r>=0?this.href(mod(~~t,1<<n),~~r,n):""},project:function(t,r){var r=r||0,n=(1<<r)/360,e=Geo.mercator(t.lat,t.lng),o=(e[0]+180)*n,a=deg(PI-e[1])*n;return[o,a,r]}});var Geo=module.exports={haversine:function(t,r,n,e){return asin(sqrt(haversin(n-t)+cos(t)*cos(n)*haversin(e-r)))},mercator:function(t,r){return[r,log(tan(45+t/2))]},mts:function(t){return new MTS(t)},MTS:MTS};Sky.SVGElem.prototype.update({map:Orb.type(function(t,r,n){var n=this.opts=up({center:{lat:0,lng:0},zoom:3,size:256},n),e=this.dims=n.dims||t.bbox(),o=this,a=[],i=[],s=[],u=this.elem=t.g(),c=u.g(),r=this.jack=[a,s],h=n.size,f=n.mts,l=e.width/h,m=e.height/h,p=Math.ceil(l)+2,v=Math.ceil(m)+2,d=f.project(n.center,n.zoom),g=d[0],M=d[1],S=d[2],y=function(t,r,n){var e=Sky.box(t-p/2,r-v/2,p,v);return u.transform({scale:h,translate:[-(t-l/2),-(r-m/2)]}),c.clear(),i.map(function(t){var r=f.project(t[0],n).slice(0,2);t[1].transform({translate:r,scale:1/h})}),e.grid(function(t,r,o,a,i){var s=0,u=0,h=c.g().transform({translate:[~~r.x,~~r.y]}),l=h.image(0,0,r.w,r.h,f.tile(r.x,r.y,n)),m=h.loop(null,{bbox:e,wrap:function(t,e){l.href(f.tile(r.x+(s+=t*p),r.y+(u+=e*v),n))}});return t[i]=h.wagon(m),t},a,{rows:v,cols:p})};y(g,M,S),this.move=function(t,n){var e=t/h,o=n/h;g-=e,M-=o,Orb.move(r,e,o)},this["goto"]=function(t){var r=f.project(t||n.center,S);Orb.move(this,r[0]-g,r[1]-M)},this.zoom=function(t){var r=Math.pow(1<<Math.abs(t),Sun.sgn(t));y(g*=r,M*=r,S+=t)},this.add=function(t,r){var r=r||n.center,e=f.project(r,S).slice(0,2),a=u.g().transform({translate:e,scale:1/h}),c=t.call(o,a);return i.push([r,a]),c&&s.push(c),c}})});
},{"../sky":7,"../sun":8,"./orb":4}],4:[function(require,module,exports){
var Sky=require("../sky"),U=Sky.util,def=U.def,fnt=U.fnt,clip=U.clip,pop=U.pop,up=U.update,ext=U.extend,abs=Math.abs,log=Math.log,rnd=Math.round,E=Math.E,min=Math.min,max=Math.max,sgn=function(t){return 0>t?-1:1},cat=function(t,e){return e?[].concat(t,e):t},id=function(t){return t},noop=function(){},touch="undefined"!=typeof ontouchstart,pointerdown=touch?"touchstart":"mousedown",pointermove=touch?"touchmove":"mousemove",pointerup=touch?"touchend touchcancel":"mouseup",Orb=function(t,e,n){this.jack=e||this.jack,this.elem=n||this.elem,this.grip=0,this.update(t)};Orb.prototype.update=function(t){return up(this,t)},Orb.prototype.update({prop:function(t,e){return Orb["do"](this.jack,t,e)},grab:function(){return this.grip++,this.prop("grab",arguments)},free:function(){return this.grip--,this.prop("free",arguments)},move:function(){return this.prop("move",arguments)},push:function(){return this.prop("move",arguments)},sync:function(){return this.prop("sync",arguments)},drag:function(t,e){return Orb.drag(this,t,e)},walk:function(t,e){return Orb.walk(this,t,e)},thru:function(t,e){return Orb.thru(this,t,e)}}),Orb=module.exports=up(Orb,{"do":function(t,e,n){if(t){if(t[e])return t[e].apply(t,n);if(t instanceof Array)return t.reduce(function(t,o){return Orb["do"](o,e,n)},0)}},call:function(t,e){return Orb["do"](t,e,[].slice.call(arguments,2))},grab:function(t){return Orb["do"](t,"grab",[].slice.call(arguments,1))},free:function(t){return Orb["do"](t,"free",[].slice.call(arguments,1))},move:function(t,e,n,o,r,i,s){return Orb["do"](t,"move",[e||0,n||0,o,r,i,s])},drag:function(t,e,n){return Orb.grab(t),Orb["do"](t,e,n),Orb.free(t),t},type:function(t){var e=t.prototype=new Orb;return[].slice.call(arguments,1).map(function(t){up(e,t)}),function(e,n,o,r){return new t(this,e,n,o,r)}},walk:function(t,e,n){return e.call(t,t.parent?Orb.walk(t.parent,e,n):n)},thru:function(t,e,n){return n.map(function(n){Object.defineProperty(t,n,{get:function(){return e[n]}})})}}),Sky.Elem.prototype.update({tap:function(t,e,n){var o,r,i,e=up({gap:250,mx:1,my:1},e);return this.swipe(this.orb({grab:function(t){r=i=0,o=!0,setTimeout(function(){o=!1},e.gap),e.stop&&t.stopImmediatePropagation(),Orb.prototype.grab.apply(this,arguments)},move:function(t,e){r+=abs(t),i+=abs(e),this.push(t,e)},free:function(n){o&&r<=e.mx&&i<=e.my&&t&&t.apply(this,arguments),o=!1,e.stop&&n.stopImmediatePropagation(),Orb.prototype.free.apply(this,arguments)}},n),{stop:e.stop})},dbltap:function(t,e){var e=up({gap:250},e),n=this,o=0;return this.on(pointerdown,function(r){o++&&t&&t.apply(n,arguments),setTimeout(function(){o=0},e.gap),e.prevent&&r.preventDefault()}),this},press:function(t,e){var n,e=up({gain:1,every:1},e),o=this.doc();return this.on(pointerdown,function(r){Orb.grab(t,r),n=setInterval(function(){Orb.move(t,e.gain)},e.every),e.prevent&&r.preventDefault(),o.once(pointerup,function(o){Orb.free(t,o),clearInterval(n),e.prevent&&o.preventDefault()})})},swipe:function(t,e){var n,o,r,e=up({glob:!0},e),i=this.doc(),s=e.glob?i:this;return this.on(pointerdown,function(p){var u=p.touches?p.touches[0]:p;Orb.grab(t,p),n=u.pageX,o=u.pageY,e.prevent&&p.preventDefault(),s.on(pointermove,r=function(r){var i=r.touches?r.touches[0]:r;Orb.move(t,i.pageX-n,i.pageY-o,n,o,r),n=i.pageX,o=i.pageY,e.stop&&r.stopImmediatePropagation(),e.prevent&&r.preventDefault()}),i.once(pointerup,function(n){s.off(pointermove,r),Orb.free(t,n),e.prevent&&n.preventDefault()})}),this},scroll:function(t,e){var n,o,e=up({prevent:!0},e);return this.on("mousewheel",function(r){Orb.move(t,r.wheelDeltaX,r.wheelDeltaY,n,o,r),n=r.pageX,o=r.pageY,e.stop&&r.stopImmediatePropagation(),e.prevent&&r.preventDefault()}).swipe(t,e)},orb:function(t,e){return new Orb(t,e,this)},amp:Orb.type(function(t,e,n){var o,r,i,s,p=Sun.pow,n=up({ax:1,ay:1,kx:1,ky:1},n);this.elem=t,this.jack=e,this.move=function(t,e,n,u,a,c){this.push(i*p(t,o),s*p(e,r),n,u,a,c)},this.setOpts=function(t){n=up(n,t),o=n.ax,r=n.ay,i=n.kx,s=n.ky},this.setOpts(n)}),spring:Orb.type(function(t,e,n){var o,r,i,s,p,u,a,c,h,l,f,b,n=up({},n);this.dx=0,this.dy=0,this.elem=t,this.jack=e,this.move=function(e,n){var o=this;o.dx+=s*e,o.dy+=p*n,h&&h.call(o),b||(f&&f.call(o),b=t.animate(function(){var t=o.dx,e=o.dy,n=abs(t),r=abs(e),i=c.call(o,t,e,n,r)||o.dx||o.dy||o.grip;return i||(b=null,l&&l.call(o)),i}))},this.setOpts=function(t){n=up(n,t),o=n.lock,r=n.kx||8,i=n.ky||8,s=n.lx||1,p=n.ly||1,u=n.tx||1,a=n.ty||1,c=n.restore||function(t,e,n,s){return o&&this.grip?void 0:(n>u&&(t/=r*log(n+1)),s>a&&(e/=i*log(s+1)),this.dx-=t,this.dy-=e,this.push(t,e,this))},h=n.stretch,l=n.balance,f=n.perturb},this.setOpts(n)}),guide:Orb.type(function(t,e,n){var o,r,i,s,p,u,a,c,h,l,f,b=Sun.clockdist,n=up({},n),m=this,v=t.spring(e);this.elem=t,this.jack=v,this.move=function(t,e){m.px=p+=t,m.py=u+=e,m.push(t,e)},this["goto"]=function(t,e){var n=p+v.dx-(t||0)*i,o=u+v.dy-(e||0)*s;m.move(-n,-o)},this.slot=function(){return[rnd((p+v.dx)/i),rnd((u+v.dy)/s)]},this.setOpts=function(e){n=up(n,e),o=pop(n,"unit",o||{}),r=n.bbox||t.bbox(),i=def(o.width,def(i,r.width)),s=def(o.height,def(s,r.height)),p=m.px=n.px||0,u=m.py=n.py||0,a=n.mx||.001,c=n.my||.001,h=n.balance,l=pop(n,"settle",l),f=pop(n,"truncate",f),v.setOpts(ext(n,{balance:function(){var t=i&&p%i,e=s&&u%s,n=b(t,0,i)>a||b(e,0,s)>c;n&&Orb.move(m.hook||m,abs(t)<i/2&&!f?-t:sgn(t)*i-t,abs(e)<s/2&&!f?-e:sgn(e)*s-e),n||l&&l.call(this,rnd(p/(i||1)),rnd(u/(s||1))),h&&h.call(this,t,e)}}))},this.setOpts(n)}),tether:Orb.type(function(t,e,n){var o,r,i,s,p,u,a,c,h,n=up({},n),l=this,f=t.orb({move:function(t,e){return l.px=c+=t,l.py=h+=e,this.push(t,e,c,h,o)}},e),b=t.spring(f,{kx:1,ky:1,lx:-1,ly:-1,lock:!0});this.elem=t,this.jack=cat(f,b),this.move=function(t,e){var n=0,o=0,l=t,m=e,v=c+t+b.dx,d=h+e+b.dy,y=v-r,x=d-s,g=v-i,O=d-p;return 0>y&&0>t?(n=(r>c?t:y)/(u*log(abs(b.dx)+E)),l=min(t-y,0)):g>0&&t>0&&(n=(c>i?t:g)/(u*log(abs(b.dx)+E)),l=max(t-g,0)),0>x&&0>e?(o=(s>h?e:x)/(a*log(abs(b.dy)+E)),m=min(e-x,0)):O>0&&e>0&&(o=(h>p?e:O)/(a*log(abs(b.dy)+E)),m=max(e-O,0)),Orb.move(b,n,o),Orb.move(f,n+l,o+m)},this["goto"]=function(t,e){return Orb.move(this,(t||0)-(c+b.dx),(e||0)-(h+b.dy))},this.setOpts=function(t){n=up(n,t),o=new Sky.Box(n.bbox||{},!0),r=o.x,i=o.right,s=o.y,p=o.bottom,u=n.rx||1,a=n.ry||1,c=l.px=def(n.px,c||0),h=l.py=def(n.py,h||0),(r>c||c>i||s>h||h>p)&&l["goto"](r>c?r:h>i?i:c,s>h?s:h>p?p:h)},this.setOpts(n)}),crank:Orb.type(function(t,e,n){var o,r,n=up({},n);this.elem=t,this.jack=e,this.move=function(e,n,i,s){var p=t.screen(o,r),u=i-p.x,a=s-p.y;return u>0&&(n=-n),0>a&&(e=-e),this.push(e+n,0,this)},this.setOpts=function(t){n=up(n,t),o=n.cx||0,r=n.cy||0},this.setOpts(n)}),wagon:Orb.type(function(t,e,n){var o,r,i,s,p,u,a,n=up({},n);this.elem=t,this.jack=e,this.move=function(e,n){var o=t.transformation(),c=o.translate=o.translate||[0,0];u&&(o.translate[0]=clip(c[0]+e,r,i)),a&&(o.translate[1]=clip(c[1]+n,s,p)),t.transform(this.push(e,n,o)||o)},this.setOpts=function(t){n=up(n,t),o=new Sky.Box(n.bbox||{},!0),r=o.x,i=o.right,s=o.y,p=o.bottom,u=o.width,a=o.height},this.setOpts(n)}),loop:Orb.type(function(t,e,n){var o,r,i,s,p,u,a,c,n=up({},n);this.elem=t,this.jack=e,this.move=function(t,e,n){for(var o=n.translate||[0,0],h=fnt(o[0],r),l=fnt(o[1],s),f=h,b=l,m=!0;m;){if(m=!1,u){var v=r>f&&1||f>i&&-1;v&&(m=!0,f+=v*u,c.call(this,v,0,h,l)||(h+=v*u))}if(a){var d=s>b&&1||b>p&&-1;d&&(m=!0,b+=d*a,c.call(this,0,d,h,l)||(l+=d*a))}}return n.translate=[h,l],this.push(t,e,n)||n},this.setOpts=function(t){n=up(n,t),o=new Sky.Box(n.bbox||{},!0),r=o.x,i=o.right,s=o.y,p=o.bottom,u=o.width,a=o.height,c=n.wrap||noop},this.setOpts(n)}),belt:Orb.type(function(t,e,n){var o,r,i,n=up({h:!0,v:!0},n),s=this,p=[].concat(e),u=p.length;this.elem=t,this.jack=p.map(function(t,e){var n=t.elem;return t.k=e,n.wagon(n.loop(t,{wrap:function(e,n){var o=t.k;return i.call(s,t,mapk(t.k+=u*(e+n)),e,n)?(t.k=o,!0):void 0}}))},[]),this.sync=function(){p.map(function(t){i.call(s,t,mapk(t.k))})},this.setOpts=function(e){n=up(n,e),o=up(n.h?{}:{width:0},n.v?{}:{height:0}),r=n.bbox||t.bbox(),i=n.draw||noop,mapk=n.mapk||id,s.jack.map(function(t){t.setOpts({bbox:o}),t.jack.setOpts({bbox:r})})},this.setOpts(n)}),treadmill:Orb.type(function(t,e,n){var o,r,i,s,p,u,a,c,n=up({h:!0,v:!0},n),h=[],l=this;this.elem=t,this.setOpts=function(f){n=up(n,f),o=n.init||id,(i=Sky.Box.solve(up({bbox:n.dims},n))||i)?(r=s=i.bbox,p=i.unit,u=i.shape,u={rows:a=u.rows,cols:c=u.cols}):(r=s=p=t.bbox(),u={rows:a=1,cols:c=1}),n.h&&(u.cols=Math.ceil(c+1),s=Sky.Box.solve({unit:p,shape:u}).bbox.shift(1-p.w,0)),n.v&&(u.rows=Math.ceil(a+1),s=Sky.Box.solve({unit:p,shape:u}).bbox.shift(0,1-p.h)),h.map(function(t){t.elem.remove()}),h=p.stack(function(e,n){var r=t.g().shift(n.x,n.y).orb({dims:n.xy()});return e.push(o.call(l,r)||r),e},[],u),l.dims=r,l.bbox=s,l.unit=p,l.rows=a,l.cols=c,l.jack=t.belt(cat(h,e),ext(n,{bbox:s})),l.sync()},this.setOpts(n)}),wheel:Orb.type(function(t,e,n){var o,r,i,s,p,u,a,c,h,l,f,b,m,n=up({kx:2,ky:2,rx:3,ry:3},n),v=this,d=this.tmill=t.treadmill(null),y=this.guide=t.guide(d),x=y.hook=t.tether(cat(y,e));this.thru(d,["dims","bbox","unit","rows","cols"]),this.elem=t,this.jack=x,this.getActive=function(){return y.slot().map(function(t){return-t})},this.setActive=function(t,e){return x["goto"](-t*b.w,-e*b.h)},this.setOpts=function(t){if(n=up(n,t),o=pop(n,"kx",o),r=pop(n,"ky",r),i=pop(n,"rx",i),s=pop(n,"ry",s),p=pop(n,"gunit",p),u=pop(n,"settle",u),a=pop(n,"active",a),c=pop(n,"window",c),h=pop(n,"offset",h||[0,0]),l=pop(n,"range",l),f=pop(n,"zero",f||[0,0]),d.setOpts(ext(n,{mapk:function(t){return t-m}})),y.setOpts({kx:o,ky:r,unit:p||v.unit,settle:function(t,e){u&&u(-t,-e)}}),b=v.unit,m=f[0]+f[1]*v.cols,l){var e=up({rows:1,cols:1},l),g=up({rows:v.rows,cols:v.cols},c),O=Sky.box(0,0,h[0]*b.w,h[1]*b.h),k=b.times({cols:max(e.cols-g.cols,0),rows:max(e.rows-g.rows,0)}).align(O,1,1);x.setOpts({bbox:Sky.box().join(k),rx:i,ry:s,px:0,py:0})}v.setActive.apply(this,a||[]),v.sync()},this.setOpts(n)})}),Sky.SVGElem.prototype.update({dolly:Orb.type(function(t,e,n){var o,r,i,s,p,u,n=up({},n);this.elem=t,this.jack=e,this.move=function(e,n){var o=t.node.viewBox.baseVal,r=[clip(o.x-e,i,s),clip(o.y-n,p,u),o.width,o.height];t.attrs({viewBox:this.push(e,n,r)||r})},this.setOpts=function(e){n=up(n,e),o=new Sky.Box(n.vbox||t.bbox()),r=new Sky.Box(n.bbox||{},!0),r=r.trim(0,o.width,0,o.height),i=r.x,s=r.right,p=r.y,u=r.bottom,t.attrs({viewBox:o})},this.setOpts(n)})});
},{"../sky":7}],5:[function(require,module,exports){
var Sky=require("../sky"),Sun=require("../sun"),Orb=require("../ext/orb"),UFO=require("./ufo"),P=Sky.path,up=Sun.up;Sky.Elem.prototype.update({button:function(t,e,r){return this.g({"class":"button"}).tap(t,e,r)},chevron:function(t,e,r,s,a){var o=Sky.box(0,0,Math.abs(r),Math.abs(s||2*r));return this.svgX(o.center(t,e)).chevron(t,e,r,s,a)}}),Sky.SVGElem.prototype.update({chevron:function(t,e,r,s,a){return this.path(P.chevron(t,e,r,s,a)).addClass("chevron")}});var iOS7x={frame:Orb.type(function(t,e,r){var e=this.elem=e.g({"class":"frame"});UFO.Frame.call(this,t,e,r)},UFO.Frame.prototype),window:Orb.type(function(t,e,r){var r=up({},r),s=this,a=this.elem=t.elem.g({"class":"window"}),o=this.content=a.g({"class":"content"}),n=this.chrome=a.g({"class":"chrome"});switch(r.transition){case"next":s.xfer=function(e){t.top&&(t.top.chrome.style({opacity:1-e/100}),Orb.move(t.top.plugs,-e/100)),n.style({opacity:e/100}),o.transform({translate:(1-e/100)*s.dims.w}),this.push(1-e/100)};break;case"prev":a.order(0),s.xfer=function(e){t.top&&(t.top.chrome.style({opacity:1-e/100}),t.top.content.transform({translate:e/100*s.dims.w}),Orb.move(t.top.plugs,e/100)),n.style({opacity:e/100}),this.push(e/100-1)};break;case"new":s.xfer=function(t){a.transform({translate:[0,(1-t/100)*s.dims.h]}),this.push(0,1-t/100)};break;case"old":a.order(0),s.xfer=function(e){t.top&&(t.top.elem.transform({translate:[0,e/100*s.dims.h]}),Orb.move(t.top.plugs,0,e/100)),this.push(0)};break;case"same":default:s.xfer=function(t){this.push(0)}}UFO.Window.call(this,t,e,r)},UFO.Window.prototype,{reset:function(){this.chrome.clear(),this.content.clear(),this.plugs.splice(0,-1)},background:Orb.type(function(t,e){var e=this.opts=up({},e),r=this.dims=t.dims,s=this.elem=t.content.g({"class":"background"});this.bgrd=s.rectX(r)}),navbar:Orb.type(function(t,e){var r,s,a,o,n=t.dims,e=this.opts=up({},e),i=this.line=t.line,c=i.h/4,h=this.dims=Sky.box(r=n.x,s=n.y,a=n.w,o=2*i.h),l=this.elem=t.chrome.g({"class":"navbar"}),p=h.midY,u=h.part([.3,.4,.3],!0),d=t.state,m=d.nav,b=m.pages[d.tag],f=d.prev,v=e.title||b.title,g=e.left,y=e.right;this.bgrd=l.rect(r,s,a,o);if(g){var x=this.lbtn=l.button(function(){g.action()}).addClass("left");x.text(r+3*c,p,g.label).anchor(-1,0),x.rectX(u[0]).order(0)}else if(f){var O=this.back=l.button(function(){t.action("back")(d.data)}).addClass("back");O.chevron(r+3*c,p,-2*c),O.text(r+5*c,p,m.pages[f.tag].title).anchor(-1,0),O.rectX(u[0]).order(0)}if(y){var k=this.rbtn=l.button(function(){y.action()}).addClass("right");k.text(h.right-3*c,p,y.label).anchor(1,0),k.rectX(u[2]).order(0)}var S=this.tbar=l.g();S.text(h.midX,p,v).anchor(0,0).addClass("title"),t.plugs.push({move:function(t){S.transform({translate:0>t?t*(a/2-12):t*(a/2-6)})}})})})},iOS=module.exports={iOS7x:iOS7x};
},{"../ext/orb":4,"../sky":7,"../sun":8,"./ufo":6}],6:[function(require,module,exports){
var Sky=require(".."),Sun=require("../sun"),Orb=require("../ext/orb"),U=Sky.util,up=Sun.up,Cage=Sun.Cage,Nav=Sun.cls(function(t,i,n){Cage.call(this),this.pages=t(this),this.frame=i,this.setOpts(n)},new Cage,{setOpts:function(t){var i=this,n=this.opts=up(this.opts||{manageHistory:!1},t);n.manageHistory&&window.setTimeout(function(){window.onpopstate=function(t){t.state&&i.go(i.fromHistory(t.state),null,!0)}},1)},path:function(t){return{tag:t.tag,prev:t.prev?this.path(t.prev):void 0,parent:t.parent?this.path(t.parent):void 0}},toHash:function(t,i){var i=i||Sun.form.decode(window.location.hash.substr(1));return"#"+Sun.form.encode(up(i,{page:btoa(JSON.stringify(t))}))},fromHash:function(t){var i=Sun.form.decode((t||window.location.hash).substr(1));return JSON.parse(atob(i.page||"")||"null")},toHistory:function(t){var i=this.pages[t.tag];return i.toHistory?i.toHistory(t):this.path(t)},fromHistory:function(t){var i=this.pages[t.tag];return i.fromHistory?i.fromHistory(t):t},changeHistory:function(t,i){var n=this.pages[t.tag],e=this.toHistory(t);window.history[i?"replaceState":"pushState"](e,n.title,this.toHash(e))},launch:function(t,i){var n=this.opts.manageHistory&&this.fromHash();return n?this.go(this.fromHistory(n),i,!0):this.go(t,i)},"do":function(){return this.action.apply(this,arguments)()},go:function(t,i,n){return this["do"](n?"load":"push",t,i)},action:function(){return this.segue(this.bind.apply(this,arguments))},segue:function(t){var i=this;return function(){return Orb.drag(t.apply(i,arguments),"move",[100])}},bind:function(t){var i=this[t];return i.bind.apply(i,[this].concat([].slice.call(arguments,1)))},draw:function(t,i){return this.pages[t].draw(i)||i},redraw:function(t){return this.draw(t.state.tag,t.reset()||t)},load:function(t,i){var t=up(t,{nav:this});return this.draw(t.tag,this.frame.window(t,i))},reload:function(t,i){var t=i?up(t,{data:i}):t;return this.load(t,{transition:"same"})},push:function(t,i){return this.opts.manageHistory&&this.changeHistory(t),this.load(t,i)},step:function(t,i,n){var t={tag:i,data:n,prev:t,parent:t.parent};return this.push(t,{transition:"next"})},back:function(t,i){var t=up(t.prev,{data:U.dfn(i,t.data)});return this.push(t,{transition:"prev"})},open:function(t,i,n){var t={tag:i,data:n,parent:t};return this.push(t,{transition:"new"})},shut:function(t,i){var t=up(t.parent,{data:U.dfn(i,t.data)});return this.push(t,{transition:"old"})}}),Frame=Sun.cls(function(t,i,n){Cage.call(this),this.elem=i,this.window=t.window,this.windows=[],this.on("top",function(t,i){i!==t&&(i&&i.didBecomeInactive(),t&&t.didBecomeActive())}),this.setOpts(n)},new Cage,{setOpts:function(t){this.opts=up(this.opts||{kx:1.5},t),this.dims=this.opts.dims||this.elem.bbox(),this.line=this.opts.line||this.dims.copy({h:20}),this.windows.map(function(t){t.state.nav.redraw(t)})},addWindow:function(t){this.windows.push(t)},removeWindow:function(t){Sun.list.drop(this.windows,t)}}),Window=Sun.cls(function(t,i,n){var e=this,s=this.elem=this.elem||t.elem;this.thru(t,["dims","line"]),this.frame=t,this.state=up(i,{win:this}),this.percent=0,this.jack=s.spring(s.orb({move:function(t){e.xfer.call(this,e.percent=U.clip(e.percent+t,0,100))}},this.plugs=[]),{balance:function(){var t=e.percent;if(t>=50){if(100>t)return this.move(100-t);e.doBecomeActive()}else{if(t>0)return this.move(-t);e.didNotBecomeActive()}}}),this.setOpts(n),this.frame.addWindow(e)},{setOpts:function(t){this.opts=up(this.opts||{kx:this.frame.opts.kx},t),this.jack.setOpts({kx:this.opts.kx})},doBecomeActive:function(){this.frame.change("top",this)},didBecomeActive:function(){},didBecomeInactive:function(){this.remove()},didNotBecomeActive:function(){this.remove()},remove:function(){this.elem!==this.frame.elem&&this.elem.remove(),this.frame.removeWindow(this)},reset:function(){return this},xfer:function(t){this.push(t)},"do":function(t){var i=this.state,n=i.nav;return n["do"].apply(n,[t,i].concat([].slice.call(arguments,1)))},action:function(t){var i=this.state,n=i.nav;return n.action.apply(n,[t,i].concat([].slice.call(arguments,1)))}}),Basic={frame:Orb.type(Frame,Frame.prototype),window:Orb.type(Window,Window.prototype)},UFO=module.exports={Nav:Nav,Frame:Frame,Window:Window,Basic:Basic};
},{"..":7,"../ext/orb":4,"../sun":8}],7:[function(require,module,exports){
function Box(t,n){this.x=def(def(t.x,t.left),n?-Inf:0),this.y=def(def(t.y,t.top),n?-Inf:0),this.w=def(def(t.w,t.width),n?Inf:0),this.h=def(def(t.h,t.height),n?Inf:0)}function RGB(t){up(this,t)}function elem(t,n,r,i){return new Elem(t,n,r,i)}function Elem(t,n,r,i){this.node=t&&t.nodeType?t:(i||document).createElementNS(this.xmlns,t),this.attrs(n),this.props(r)}function svg(t,n,r){return new SVGElem("svg",t,n,r)}function SVGElem(){Elem.apply(this,arguments)}var env=require("./env"),abs=Math.abs,min=Math.min,max=Math.max,Rt2=Math.sqrt(2),Inf=1/0,add=function(t,n){return isFinite(n)?t+n:n},def=function(t,n){return isNaN(t)?n:t},dfn=function(t,n){return void 0==t?n:t},fnt=function(t,n){return isFinite(t)?t:n},get=function(t,n,r){var i=t[n];return dfn(i,r)},pop=function(t,n,r){var i=get(t,n,r);return delete t[n],i},pre=function(t,n,r){return t[n]=get(t,n,r)},up=function(t,n){for(var r in n)t[r]=n[r];return t},ext=function(t,n){return up(Object.create(t),n)},map=function(t,n){return t&&t.map?t.map(n):n(t)},wrap=function(t){if(t)switch(t.namespaceURI){case SVGElem.prototype.xmlns:return new SVGElem(t);case Elem.prototype.xmlns:default:return new Elem(t)}},util={add:add,def:def,dfn:dfn,fnt:fnt,get:get,pop:pop,pre:pre,update:up,extend:ext,map:map,wrap:wrap,copy:function(t){return up({},t)},clip:function(t,n,r){return min(max(t,n),r)},randInt:function(t,n){return Math.round((n-t)*Math.random())+t}},trig=util.trig={rad:function(t){return Math.PI/180*t},sin:function(t){return Math.sin(trig.rad(t))},cos:function(t){return Math.cos(trig.rad(t))},cut:function(t){return util.clip(t,-359.999,359.999)}},path=function(t){return t+[].slice.call(arguments,1)},P=up(path,{M:function(t){return P("M",t)},L:function(t){return P("L",t)},join:function(){return[].reduce.call(arguments,function(t,n){return t+P.apply(null,n)},"")},line:function(t,n,r,i,e){var e=e||P.M;return e([t,n])+P.L([r,i])},rect:function(t,n,r,i,e){var e=e||P.M,i=def(i,r);return e([t,n])+P("H",t+r)+P("V",n+i)+P("H",t)+"Z"},border:function(box,t,r,b,l,open){var t=def(t,0),r=def(r,t),b=def(b,t),l=def(l,r);with(box){var ix=x+l,iy=y+t,iw=w-l-r,ih=h-t-b;return P.line(x,y,x+w,y,open)+P("v",h)+P("h",-w)+P("v",-h)+P.line(ix,iy,ix,iy+ih)+P("h",iw)+P("v",-ih)+P("h",-iw)}},corner:function(t,n,r,i,e,o,u,s,c){var c=c||P.M,e=def(e,0),o=def(o,e),s=def(s,0),h=r>t?1:-1,a=i>n?1:-1,f=h*e,d=a*o,l=u^s?+(0>h*a):+(h*a>0);if(u){var p=t+f,m=i-d;return c([t,n])+P("v",m-n)+P("a",e,o,0,0,l,f,d)+P("h",r-p)}var p=r-f,m=n+d;return c([t,n])+P("h",p-t)+P("a",e,o,0,0,l,f,d)+P("v",i-m)},chevron:function(t,n,r,i,e,o){var o=o||P.M,i=def(i,2*r),u=i/2,e=def(e,r*Rt2/5),s=e/Rt2,c=e/abs(Math.sin(Math.atan2(u,r-s))),h=t-r/2,a=n-u+s;return o([h,a])+P("l",s,-s)+P("l",r-s,u)+P("l",s-r,u)+P("l",-s,-s)+P("l",r-c,s-u)+"z"},triangle:function(t,n,r,i,e){var e=e||P.M,i=def(i,r),o=t-r/2,u=n-i/2;return e([o,u])+P("L",t,u+i)+P("L",o+r,u)+"Z"},arc:function(t,n,r,i,e,o,u){var u=u||P.M,e=trig.cut(def(e,360)),o=o||0,s=t+r*trig.cos(o),c=n+i*trig.sin(o),h=t+r*trig.cos(o+e),a=n+i*trig.sin(o+e);return u([s,c])+P("A",r,i,0,abs(e)>180?1:0,e>0?1:0,h,a)},oval:function(t,n,r,i,e){var i=def(i,r);return P.arc(t,n,r,i,360,0,e)},arch:function(t,n,r,i,e,o,u,s){var o=trig.cut(def(o,360)),u=u||0,e=def(e,1);return P.arc(t,n,r,i,o,u,s)+P.arc(t,n,r+e,i+e,-o,u+o,P.L)+"Z"},ring:function(t,n,r,i,e,o){var e=def(e,1);return P.arc(t,n,r,i,360,0,o)+P.arc(t,n,r+e,i+e,-360,360)},wedge:function(t,n,r,i,e,o,u){var u=u||P.M;return u([t,n])+P.arc(t,n,r,i,e,o,P.L)+"Z"},snake:function(t,n,r,i,e){if(e){var o=(n+i)/2;return P("C",t,o,r,o,r,i)}var u=(t+r)/2;return P("C",u,n,u,i,r,i)}}),units=function(t,n){var r={};for(var i in t)r[i]=Q.unify(i,t[i],n);return r},Q=up(units,{defaults:{top:"px",left:"px",right:"px",bottom:"px",width:"px",height:"px",translate:"px",rotate:"deg",skewX:"deg",skewY:"deg",borderRadius:"px"},unify:function(t,n,r){var r=r||Q.defaults,i=r[t]||"";return map(n,function(t){return isFinite(t)?t+i:t})},strip:function(t,n,r){var r=r||Q.defaults,i=r[t],e=i&&i.length;return i?map(n,function(t){return t.substr(-e)==i?parseFloat(t):t}):n},each:function(t,n,r){return map(t,function(t){return Q.unify(t,n[t],r)})},rect:function(t,n){return"rect("+Q.each(["top","right","bottom","left"],t,n)+")"},calc:function(t,n){return"calc("+[].concat(t).join(" "+(n||"-")+" ")+")"},url:function(t){return"url("+t+")"}});Box.prototype={constructor:Box,get width(){return this.w},get height(){return this.h},get left(){return this.x},get top(){return this.y},get midX(){return add(this.x,this.w/2)},get midY(){return add(this.y,this.h/2)},get right(){return add(this.x,this.w)},get bottom(){return add(this.y,this.h)},grid:function(t,n,r){for(var i=up({rows:1,cols:1},r),e=i.rows,o=i.cols,u=this.x,s=this.y,c=this.w/o,h=this.h/e,a=new Box({x:u,y:s,w:c,h:h}),f=0,d=0;e>f;f++)for(var l=0;o>l;l++,d++)n=t.call(this,n,a.shift(c*l,h*f),f,l,d,a);return n},join:function(t){var t=[].concat(t),n=t.reduce(function(t,n){return{x:min(t.x,n.x),y:min(t.y,n.y),right:max(t.right,n.right),bottom:max(t.bottom,n.bottom)}},this);return new Box({x:n.x,y:n.y,w:n.right-n.x,h:n.bottom-n.y})},tile:function(t,n,r){return this.grid(t,n,this.count(r&&r.unit))},stack:function(t,n,r){return this.times(r).grid(t,n,r)},count:function(t){var n=t||this;return{rows:this.h/n.h,cols:this.w/n.w}},times:function(t){var n=up({rows:1,cols:1},t);return this.copy({w:n.cols*this.w,h:n.rows*this.h})},over:function(t){var n=up({rows:1,cols:1},t);return this.copy({w:this.w/n.cols,h:this.h/n.rows})},split:function(t){return this.grid(function(t,n){return t.push(n),t},[],t)},align:function(t,n,r){var i=(n||0)/2,e=(r||0)/2,o=i+.5,u=e+.5,s=t.midX+i*t.w-o*this.w,c=t.midY+e*t.h-u*this.h;return this.copy({x:s,y:c})},center:function(t,n){return this.copy({x:(t||0)-this.w/2,y:(n||0)-this.h/2})},xy:function(t,n){return this.copy({x:t||0,y:n||0})},scale:function(t,n){var r=t*this.w,i=def(n,t)*this.h;return new Box({x:this.midX-r/2,y:this.midY-i/2,w:r,h:i})},shift:function(t,n){return this.copy({x:this.x+(t||0),y:this.y+(n||0)})},square:function(t){var n=t?max:min,r=n(this.w,this.h);return this.copy({w:r,h:r})},slice:function(t,n){var r=n?this.w:this.h,t=[].concat(t),i=1-t.reduce(function(t,n){return isFinite(n)?t+n:t},0)/r;return this.part(t.map(function(t){var n="string"==typeof t&&"%"==t[t.length-1];return n?i*parseFloat(t.slice(0,-1))/100:t/r}),n)},part:function(t,n){var r=this,i=n?"x":"y",e=n?"w":"h",o=r[i],u={},s=0,t=[].concat(t,void 0);return t.map(function(t){return u[i]=o+=u[e]||0,u[e]=def(t,1-s)*r[e],s+=t,r.copy(u)})},pad:function(t,n,r,i){return this.trim(-t,-n,-r,-i)},trim:function(t,n,r,i){var t=def(t,0),n=def(n,t),r=def(r,t),i=def(i,n);return new Box({x:this.x+i,y:this.y+t,w:this.w-n-i,h:this.h-t-r})},copy:function(o){var o=o||{},ow=def(o.w,o.width),oh=def(o.h,o.height);with(this)return new Box({x:def(o.x,x),y:def(o.y,y),w:def(ow,w),h:def(oh,h)})},equals:function(o){var o=o||{},ow=def(o.w,o.width),oh=def(o.h,o.height);with(this)return x==def(o.x,0)&&y==def(o.y,0)&&w==def(ow,0)&&h==def(oh,0)},toString:function(){with(this)return x+","+y+","+w+","+h}},Box.solve=function(t){var n=up({},t),r=n.bbox,i=n.shape,e=n.unit;return r&&i?up(n,{shape:up({rows:1,cols:1},i),unit:r.over(i)}):e&&i?up(n,{shape:up({rows:1,cols:1},i),bbox:e.times(i)}):r&&e?up(n,{shape:r.count(e),unit:e.copy({x:r.x,y:r.y})}):void 0},RGB.mix=function(t,n){function r(n,r){return((r||0)*max(t-o,0)+(n||0)*max(u-t,0))/(u-o)}function i(t,n){return Math.round(r(t,n))}var e=up({min:0,max:100,lo:{b:100},hi:{r:100}},n),o=e.min,u=e.max,s=e.lo,c=e.hi;return new RGB(void 0==s.a&&void 0==c.a?{r:i(s.r,c.r),g:i(s.g,c.g),b:i(s.b,c.b)}:{r:i(s.r,c.r),g:i(s.g,c.g),b:i(s.b,c.b),a:r(s.a,c.a)})},RGB.random=function(){return new RGB({r:util.randInt(0,255),g:util.randInt(0,255),b:util.randInt(0,255)})},RGB.prototype.update=function(t){return up(this,t)},RGB.prototype.update({alpha:function(t){return void 0==t?this:this.update({a:t})},shift:function(t){function n(n){return util.clip(n+t,0,255)}return new RGB({r:n(this.r||0),g:n(this.g||0),b:n(this.b||0)}).alpha(this.a)},toString:function(){return void 0==this.a?"rgb("+(this.r||0)+","+(this.g||0)+","+(this.b||0)+")":"rgba("+(this.r||0)+","+(this.g||0)+","+(this.b||0)+","+this.a+")"}}),Elem.prototype.update=function(t){return up(this,t)},Elem.prototype.update({xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/1999/xhtml",addTo:function(t){return(t.node||t).appendChild(this.node),this},append:function(t){return t.addTo(this),this},child:function(t,n,r){return new this.constructor(t,n,r).addTo(this)},clear:function(){for(var t=this.node;t.firstChild;)t.removeChild(t.firstChild);return this},order:function(t){var n=this.node,r=n.parentNode,i=r.childNodes.length;return r.insertBefore(n,r.childNodes[util.clip(0>t?i+t:t,0,i)]),this},remove:function(){var t=this.node,n=t.parentNode;return n&&n.removeChild(t),this},$:function(t){return wrap("string"==typeof t?this.node.querySelector(t):t)},doc:function(){return this.node.ownerDocument?new Elem(this.node.ownerDocument):this},each:function(t,n,r){return[].reduce.call(this.node.querySelectorAll(t),n,r)||this},parent:function(){return wrap(this.node.parentNode)},root:function(){for(var t=this.node;t.parentNode;t=t.parentNode);return t},attached:function(t){return this.root()==(t?t.root():this.doc().node)},detached:function(t){return!this.attached(t)},unique:function(t,n){return this.$(t)||n(this)},hide:function(t){return this.attrs({hidden:t||void 0==t?"":null})},show:function(t){return this.attrs({hidden:t||void 0==t?null:""})},attr:function(t,n){return this.node.getAttributeNS(n||null,t)},attrs:function(t,n){for(var r in t){var i=t[r];null==i?this.node.removeAttributeNS(n||null,r):this.node.setAttributeNS(n||null,r,i)}return this},props:function(t){for(var n in t)this.node[n]=t[n];return this},style:function(t){for(var n in t)this.node.style[n]=t[n];return this},space:function(t){return this.attrs({space:t},this.xml)},txt:function(t,n){return isFinite(n)?(elem(this.doc().node.createTextNode(t)).addTo(this).order(n),this):this.props({textContent:t})},uid:function(){var t=new Date-0+Math.random()+"";return this.attrs({id:t}),t},url:function(){return Q.url("#"+(this.attr("id")||this.uid()))},addClass:function(t){var n=this.node;return map(t,function(t){n.classList.add(t)}),this},hasClass:function(t){return this.node.classList.contains(t)},removeClass:function(t){var n=this.node;return map(t,function(t){n.classList.remove(t)}),n.classList.length||n.removeAttribute("class"),this},css:function(t){var n=getComputedStyle(this.node);return t?n[t]:n},addRules:function(t){var n=0,r=this.node.sheet;for(var i in t){var e=t[i],o="";for(var u in e)o+=u+": "+e[u]+";";r.insertRule(i+"{"+o+"}",n++)}return n},animate:function(t,n){var r=this,i=0,e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;return e(function(){(t.call(r,r.node,i++)||n>i)&&e(arguments.callee)}),this},bind:function(t){var n=this[t];return n.bind.apply(n,[this].concat([].slice.call(arguments,1)))},on:function(t,n,r){var i=this.node;return t.split(/\s+/).map(function(t){i.addEventListener(t,n,r)}),this},off:function(t,n,r){var i=this.node;return t.split(/\s+/).map(function(t){i.removeEventListener(t,n,r)}),this},trigger:function(t,n,r){return this.node.dispatchEvent(new CustomEvent(t,up({detail:n},r))),this},upon:function(t,n,r){var i=function(t){return n.call(this,t,t.detail)};return this.on(t,i,r)&&i},once:function(t,n){var r=0;return this.til(t,n,function(){return r++})},til:function(t,n,r){var i=this;i.on(t,function(){r()?i.off(t,arguments.callee):n.apply(this,arguments)})},svg:function(t,n){return svg(up({"class":"svg"},t),n).addTo(this)},link:function(t){return this.child("a").href(t)},para:function(t){return this.child("p").txt(t)},div:function(t,n){return this.child("div",t,n)},span:function(t,n){return this.child("span",t,n)},form:function(t,n){return this.child("form",t,n)},input:function(t,n){return this.child("input",t,n)},image:function(t,n,r,i,e,o){return this.child("img",{"class":"image"}).attrs({src:e}).xywh(t,n,r,i,o)},circle:function(t,n,r,i){return this.div({"class":"circle"}).xywh(t-r,n-r,2*r,2*r,i).style(Q({borderRadius:r},i))},ellipse:function(t,n,r,i,e){return this.div({"class":"ellipse"}).xywh(t-r,n-i,2*r,2*i,e).style({borderRadius:Q.unify("borderRadius",[r,i],e).join(" / ")})},rect:function(t,n,r,i,e){return this.div({"class":"rect"}).xywh(t,n,r,i,e)},text:function(t,n,r,i){return this.span({"class":"text"}).xy(t,n,i).txt(r)},g:function(t,n){return this.div(t,n)},icon:function(t,n,r,i,e,o){return this.svgX(Sky.box(t,n,r,i),o).attrs({"class":"icon"}).icon(t,n,r,i,e)},svgX:function(t,n){return this.svg({viewBox:t}).resize(t,n)},iconX:function(box,href,u){with(box||this.bbox())return this.icon(x,y,w,h,href,u)},imageX:function(box,href,u){with(box||this.bbox())return this.image(x,y,w,h,href,u)},circleX:function(box,p,big,u){var o=big?max:min;with(box||this.bbox())return this.circle(midX,midY,def(p,1)*o(w,h)/2,u)},ellipseX:function(box,px,py,u){with(box||this.bbox())return this.ellipse(midX,midY,def(px,1)*w/2,def(py,1)*h/2,u)},rectX:function(box,u){with(box||this.bbox())return this.rect(x,y,w,h,u)},textX:function(t,n,r,i,e){return this.text(0,0,n,e).align(t||this.bbox(),r,i)},anchor:function(t,n){var r=0>t?0:t>0?-100:-50,i=0>n?0:n>0?-100:-50;return this.transform({translate:[r+"%",i+"%"]})},bbox:function(){return new Box(this.node.getBoundingClientRect()).shift(pageXOffset,pageYOffset)},polar:function(t,n){return[t*trig.cos(n),t*trig.sin(n)]},href:function(t){return this.attrs({href:t})},xy:function(t,n,r){return this.style(Q({left:t,top:n},r))},xywh:function(t,n,r,i,e){return this.style(Q({left:t,top:n,width:r,height:i},e))},align:function(t,n,r,i){return this.place(Sky.box().align(t,n,r),i).anchor(n,r)},place:function(t,n){return this.parent().xy.call(this,t.x,t.y,n)},resize:function(t,n){return this.parent().xywh.call(this,t.x,t.y,t.w,t.h,n)},screen:function(t,n){return{x:t,y:n}},shift:function(t,n){var r=this.transformation(),i=r.translate=r.translate||[0,0];return i[0]+=t||0,i[1]+=n||0,this.transform(r)},transform:function(t,n){var r=[];for(var i in t)r.push(i+"("+Q.unify(i,[].concat(t[i]),n).join(",")+")");return r=r.join(" "),this.style({transform:r,"-moz-transform":r,"-ms-transform":r,"-o-transform":r,"-webkit-transform":r})},transformation:function(t,n){for(var r,i=this.node.style,t=t||i.transform||i["-webkit-transform"]||i["-o-transform"]||i["-ms-transform"]||i["-moz-transform"]||"",e=/(\w+)\(([^\)]*)\)/g,o={};r=e.exec(t);){var u=r[1],s=r[2].split(",");o[u]=Q.strip(u,s,n)}return o}}),SVGElem.prototype=(new Elem).update({constructor:SVGElem,xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",svg:function(t,n){return this.child("svg",t,n)},circle:function(t,n,r){return this.child("circle",{cx:t,cy:n,r:r})},ellipse:function(t,n,r,i){return this.child("ellipse",{cx:t,cy:n,rx:r,ry:i})},line:function(t,n,r,i){return this.child("line",{x1:t,y1:n,x2:r,y2:i})},path:function(t){return this.child("path",t&&{d:t})},polyline:function(t){return this.child("polyline",{points:t})},polygon:function(t){return this.child("polygon",{points:t})},rect:function(t,n,r,i){return this.child("rect",{x:t,y:n,width:r,height:i})},text:function(t,n,r){return this.child("text",{x:t,y:n},{textContent:r})},tspan:function(t){return this.child("tspan",{},{textContent:t})},g:function(t,n){return this.child("g",t,n)},image:function(t,n,r,i,e){return this.child("image").href(e).xywh(t,n,r,i)},use:function(t){return this.child("use").href(t)},mask:function(t,n){return this.child("mask",t,n)},clipPath:function(t,n){return this.child("clipPath",t,n)},icon:function(t,n,r,i,e){return this.use(e).xywh(t,n,r,i)},border:function(t,n,r,i,e){return this.path(P.border(e||this.bbox(),t,n,r,i))},anchor:function(t,n){var r=0>t?"start":t>0?"end":"middle",i=0>n?"hanging":n>0?"alphabetic":"central";return this.attrs({"text-anchor":r,"dominant-baseline":i})},bbox:function(){return new Box(this.node.getBBox())},enc:function(){return"svg"==this.node.tagName?this:new SVGElem(this.node.ownerSVGElement)},fit:function(){return this.enc().attrs({viewBox:this.bbox()})},href:function(t){return this.attrs({href:t},this.xlink)},xy:function(t,n){return this.attrs({x:t,y:n})},xywh:function(t,n,r,i){return this.attrs({x:t,y:n,width:r,height:i})},point:function(t,n){var r=this.enc().node.createSVGPoint();return r.x=t,r.y=n,r},screen:function(t,n){return this.point(t,n).matrixTransform(this.node.getScreenCTM())},transform:function(t){var n=[];for(var r in t)n.push(r+"("+[].concat(t[r]).join(",")+")");return this.attrs({transform:n.join(" ")})},transformation:function(t){for(var n={},t=t||this.node.transform.baseVal,r=0;r<t.numberOfItems;r++){var i=t.getItem(r),e=i.matrix;i.type==SVGTransform.SVG_TRANSFORM_MATRIX?n.matrix=[e.a,e.b,e.c,e.d,e.e,e.f]:i.type==SVGTransform.SVG_TRANSFORM_TRANSLATE?n.translate=[e.e,e.f]:i.type==SVGTransform.SVG_TRANSFORM_SCALE?n.scale=[e.a,e.d]:i.type==SVGTransform.SVG_TRANSFORM_ROTATE?n.rotate=[i.angle,(e.f/e.c+e.e)/e.a,(e.e/e.b-e.f)/e.a]:i.type==SVGTransform.SVG_TRANSFORM_SKEWX?n.skewX=i.angle:i.type==SVGTransform.SVG_TRANSFORM_SKEWY&&(n.skewY=i.angle)}return n}});var Sky=module.exports={$:function(t){return new Elem(document).$(t)},box:function(t,n,r,i){return new Box({x:t,y:n,w:r,h:i})},rgb:function(t,n,r,i){return new RGB({r:t,g:n,b:r,a:i})},elem:elem,svg:svg,util:util,path:path,units:units,Box:Box,RGB:RGB,Elem:Elem,SVGElem:SVGElem};
},{"./env":1}],8:[function(require,module,exports){
var up=function(n,t){for(var e in t)n[e]=t[e];return n},cls=function(n){return[].slice.call(arguments,1).map(function(t){up(n.prototype,t)}),n},int=function(n){return parseInt(n,10)},sgn=function(n){return 0>n?-1:1},pow=function(n,t){return sgn(n)*Math.pow(Math.abs(n),t||2)},add=function(n,t){return n+t},max=function(n,t){return n>t?n:t},min=function(n,t){return t>n?n:t},mod=function(n,t){var e=n%t;return 0>e?e+t:e},pad=function(n,t){for(var n=n+"",e=t&&t.width||2,r=t&&t.pad||"0";n.length<e;)n=r+n;return n},item=function(n){return n instanceof Array?n:[n,!0]},nchoosek=function(n,t){for(var e=1,r=1,u=n;u>t;u--)e*=u,r*=n-u+1;return e/r},bezier=function(n,t){var e=t.length-1,r=0,u=0;for(i=0;i<=e;i++){var o=t[i],a=nchoosek(e,i)*Math.pow(1-n,e-i)*Math.pow(n,i);r+=a*(o[0]||0),u+=a*(o[1]||0)}return[r,u]},Sun=module.exports={up:up,cls:cls,"int":int,sgn:sgn,pow:pow,add:add,max:max,min:min,mod:mod,pad:pad,item:item,nchoosek:nchoosek,bezier:bezier,clockdist:function(n,t,e){return min(mod(n-t,e||24),mod(t-n,e||24))},ellipsis:function(n,t){return t&&n.length>t+3?n.substr(0,t)+"…":n},equals:function(n,t){if(n||t){if(n&&t){for(var e in n)if(n[e]!=t[e])return!1;for(var e in t)if(t[e]!=n[e])return!1;return!0}return!1}return!0},count:function(n,t,e){for(var r=up({start:0,step:1,stop:isFinite(e)?e:void 0},e),u=r.start+r.step>=r.start,o=r.start;u?o<r.stop:o>r.stop;o+=r.step)t=n(t,o,r);return t},range:function(n){return Sun.count(L.append,[],n)},fold:function(n,t,e){var r=0;if(e instanceof Array)for(var u in e)t=n(t,item(e[u]),r++,e);else for(var u in e)t=n(t,[u,e[u]],r++,e);return t},format:function(n,t){return n.replace(/{(.*?)}/g,function(n,e){return e in t?t[e]:n})},keyfun:function(n){return n instanceof Function?n:void 0==n?function(n){return n}:function(t){return t[n]}},lookup:function(n,t){var t=L(t);return t.reduce(function(n,t){return n?n[t]:n},n)},modify:function(n,t,e){var t=L(t),r=Sun.lookup(n,t.slice(0,-1)),u=L.last(t);return r&&t.length&&(r[u]=e(r[u])),n},object:function(n,t){return Sun.fold(function(n,e){var r=e[0],u=e[1];return void 0===u&&(u=t),void 0!==u&&(n[r]=u),n},{},n)},select:function(n,t){return Sun.fold(function(t,e){var r=e[0],u=n[r];return void 0!==u&&(t[r]=u),t},{},t)},repeat:function(n,t){return n()||setTimeout(function(){n()||setTimeout(arguments.callee,t)},t)},throttle:function(n,t,e){return function(){clearTimeout(e),e=setTimeout(n.bind.apply(n,L.concat(this,arguments)),t)}}};Sun.Cage=function(n,t){return this.__opt__=up({sep:/\s+/},t),this.__obj__=n||this,this.__fns__={},this},up(Sun.Cage.prototype,{get:function(n,t){return n in this.__obj__?this.__obj__[n]:t},change:function(n,t){var e=this.__obj__[n];return this.__obj__[n]=t,this.trigger(n,t,e),t},update:function(n){for(var t in n)this.change(t,n[t]);return this},on:function(n,t){var e=this.__fns__,r=this.__opt__.sep;return n.split(r).map(function(n){(e[n]=e[n]||[]).push(t)}),this},off:function(n,t){var e=this.__fns__,r=this.__opt__.sep;return n.split(r).map(function(n){var r=(e[n]||[]).indexOf(t);r>=0&&delete e[n][r]}),this},once:function(n,t){var e=0;return this.til(n,t,function(){return e++})},til:function(n,t,e){this.on(n,function(){e()?this.off(n,arguments.callee):t.apply(this,arguments)})},trigger:function(n,t,e){var r=this;return(r.__fns__[n]||[]).map(function(u){u.call(r,t,e,n)})}}),Sun.URL={format:function(n){var t="";return n.scheme&&(t+=n.scheme+":"),n.authority&&(t+="//"+n.authority),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.fragment&&(t+="#"+n.fragment),t}},Sun.form={encode:function(n){var t=[];for(var e in n)t.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t.join("&")},decode:function(n){var t=n?n.split("&"):[];return t.reduce(function(n,t){var e=t.split("=").map(decodeURIComponent);return n[e[0]]=e[1],n},{})}};var H=Sun.http=up(function(n,t,e,r,u){var o=new XMLHttpRequest;return o.onreadystatechange=function(){this.readyState==this.DONE&&e(this)},o.open(n,t,!0),Sun.fold(function(n,t){o.setRequestHeader(t[0],t[1])},null,u),o.send(r),o},{get:function(n,t,e){return H("GET",n,t,null,e)},put:function(n,t,e,r){return H("PUT",n,t,e,r)},post:function(n,t,e,r){return H("POST",n,t,e,r)}}),L=Sun.list=up(function(n){return n instanceof Array?n:[n]},{last:function(n,t){return n[n.length-(t||1)]},append:function(n,t){return n.push(t)&&n},concat:function(n,t){return[n].concat([].slice.call(t))},drop:function(n,t){var e=n.indexOf(t);return e>=0?n.splice(e,1)[0]:void 0},fold:function(n,t,e){for(var r=0;r<n.length;r++)e=t(e,n[r],r,n);return e},groupby:function(n,t){var e,t=t||function(n){return n[0]};return L.fold(n,function(n,r){var u=t(r);return u==e?n[n.length-1][1].push(r):n.push([u,[r]]),e=u,n},[])},unique:function(n,t){var e={},t=t||function(n){return n};return L.fold(n,function(n,r){var u=t(r);return u in e?n:(e[u]=!0,n.push(r),n)},[])},insert:function(n,t,e){for(var e=e||function(n,t){return t>=n},r=0;r<n.length;r++)if(e(t,n[r]))return n.splice(r,0,t)&&n;return n.push(t)&&n},keyindex:function(n,t,e,r){for(var r=r||function(n,t){return t>=n&&n>=t},e=Sun.keyfun(e),u=0;u<n.length;u++){var o=e(n[u]);if(r(o,t))return u}},keydrop:function(n,t,e,r){var u=L.keyindex(n,t,e,r);return u>=0?n.splice(u,1)[0]:void 0},keymodify:function(n,t,e,r,u){var o=L.keyindex(n,t,r,u);return o>=0?n[o]=e(n[o]):(n.push(e()),L.last(n))},times:function(n,t){for(var e=[],r=0;t>r;r++)e=e.concat(n);return e},umerge:function(n,t,e){for(var r,e=e||function(n,t){return t>n},u=[],o=0,i=0;o<n.length||i<t.length;)i>=t.length||e(n[o],t[i])?((e(r,n[o])||!o&&!i)&&u.push(r=n[o]),o++):((e(r,t[i])||!o&&!i)&&u.push(r=t[i]),i++);return u},values:function(n){var t=[];for(var e in n)t.push(n[e]);return t}}),Sec=1e3,Min=60*Sec,Hour=60*Min,Day=24*Hour,Week=7*Day,DoW=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MoY=["January","February","March","April","May","June","July","August","September","October","November","December"],T=Sun.time=up(function(n,t){var t=t?new Date(t):new Date,n=n||{};return new Date(void 0==n.y?t.getFullYear():n.y,void 0==n.m?t.getMonth():n.m,void 0==n.d?t.getDate():n.d,void 0==n.h?t.getHours():n.h,void 0==n.mi?t.getMinutes():n.mi,void 0==n.s?t.getSeconds():n.s,void 0==n.ms?t.getMilliseconds():n.ms)},{get:function(n,t){var t=t?new Date(t):new Date;switch(n){case"y":return t.getFullYear();case"m":return t.getMonth();case"d":return t.getDate();case"h":return t.getHours();case"mi":return t.getMinutes();case"s":return t.getSeconds();case"ms":return t.getMilliseconds()}},pass:function(n,t){var t=t?new Date(t):new Date;for(var e in n)switch(e){case"y":t.setFullYear(t.getFullYear()+n[e]);break;case"m":t.setMonth(t.getMonth()+n[e]);break;case"w":t.setDate(t.getDate()+7*n[e]);break;case"d":t.setDate(t.getDate()+n[e]);break;case"h":t.setHours(t.getHours()+n[e]);break;case"mi":t.setMinutes(t.getMinutes()+n[e]);break;case"s":t.setSeconds(t.getSeconds()+n[e]);break;case"ms":t.setMilliseconds(t.getMilliseconds()+n[e])}return t},fold:function(n,t,e){for(var r=e.start||new Date,u=e.stop,o=e.step||{d:1},i=T.pass(o,r)>=r,a={},s=1,c=r;!u||(i?u>r:r>u);s++){t=n(t,r);for(var f in o)a[f]=o[f]*s;r=T.pass(a,c)}return t},parse:function(n,t){var t=t||{},e=t.sep||"T",r=t.dsep||"-",u=(t.tsep||":",t.utc||"Z"==n[n.length-1]),o=n.split(e),i=o[0]?o[0].split(r).map(int):[0,0,0],a=o[1]?o[1].substring(0,8).split(":").map(int):[0,0,0];return u?new Date(Date.UTC(i[0],i[1]-1,i[2],a[0],a[1],a[2])):new Date(i[0],i[1]-1,i[2],a[0],a[1],a[2])},datestamp:function(n){return n.getFullYear()+"/"+pad(n.getMonth()+1)+"/"+pad(n.getDate())},timestamp:function(n){return pad(n.getHours())+":"+pad(n.getMinutes())+":"+pad(n.getSeconds())},stamp:function(n){return T.datestamp(n)+" "+T.timestamp(n)},fromGregorian:function(n){return new Date(1e3*(n-62167219200))},toGregorian:function(n){return~~(n/1e3)+62167219200},daysInMonth:function(n,t){return 32-new Date(n,t,32).getDate()},isLeapYear:function(n){return!(n%4||n%100==0&&n%400)},weekday:function(n){return DoW[n.getDay()]},month:function(n){return MoY[n.getMonth()]},DoW:DoW,MoY:MoY,Sec:Sec,Min:Min,Hour:Hour,Day:Day,Week:Week});
},{}]},{},[2])


//# sourceMappingURL=all.map